<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>035-Promise静态方法-race方法.html</title>
</head>
<body>
	
</body>
<script>
	
	/*
	//接受一个Promise实例数组作为参数，返回执行最快的那个promise对象
	let p1 = new Promise((resolve,reject)=>{
		setTimeout(()=>{
			resolve('p1');
		},1000)
		setTimeout(()=>{
			reject('p1');
		},800)
	});
	
	let p2 = new Promise((resolve,reject)=>{
		setTimeout(()=>{
			resolve('p2');
		},500)
	});
	let p = Promise.race([p1,p2]);
		// console.log(p);
	p.then((val)=>{
		console.log('resolved...',val);
	},(val)=>{
		console.log('rejected...',val);
	})
	*/


	const getTimerPromise = (delay)=>new Promise((resolve,reject)=>{
        setTimeout(()=>{
            resolve('timer '+ delay + ' success data')
        },delay);
    })

    const promises = [200,800,1200].map(delay=>getTimerPromise(delay))

    const p1 = new Promise((resolve,reject)=>{
        setTimeout(()=>{
            reject('timer '+ 100 + ' error data');
        },1000);
    })

    promises
    .push(p1)
    	console.log(promises);
    const p = Promise.race(promises)
    
    p
    .then(data=>{
        console.log(data);
    })
    
    .catch(err=>{
        console.log(err);
    })

	
</script>
</html>